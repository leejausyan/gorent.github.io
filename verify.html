<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verifikasi Peminjaman - GoRent</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-[#0d1117] via-[#161b22] to-[#0d1117] flex items-center justify-center min-h-screen p-4">

  <div class="w-full max-w-2xl">
    <!-- Header Card -->
    <div class="bg-gradient-to-r from-[#1c2128] to-[#161b22] border border-[#30363d] rounded-t-2xl p-8 shadow-2xl">
      <div class="flex items-center justify-center mb-4">
        <img src="images/JMMI-rm.png" alt="JMMI Logo" class="w-12 h-12 mr-3 object-contain" />
        <h1 class="text-3xl font-bold text-white">JMMI GoRent</h1>
      </div>
      <p class="text-center text-[#8b949e] text-sm">Status Peminjaman Anda</p>
    </div>

    <!-- Main Content Card -->
    <div class="bg-[#0d1117] border border-t-0 border-[#30363d] rounded-b-2xl p-8 shadow-2xl">
      
      <!-- Loading State -->
      <div id="loadingState" class="text-center py-12">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#1f6feb] mb-4"></div>
        <p class="text-[#8b949e]">Memuat data peminjaman...</p>
      </div>

      <!-- Error State -->
      <div id="errorState" class="hidden">
        <div class="bg-red-900/30 border border-red-700/50 rounded-lg p-6 text-center">
          <svg class="w-16 h-16 text-red-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <h2 class="text-xl font-bold text-red-400 mb-2">Data Tidak Ditemukan</h2>
          <p class="text-[#8b949e] mb-4">ID peminjaman tidak valid atau data tidak ditemukan.</p>
          <a href="index.html" class="inline-block bg-gradient-to-r from-[#1f6feb] to-[#58a6ff] text-white font-semibold py-2 px-6 rounded-lg hover:from-[#388bfd] hover:to-[#79c0ff] transition-all duration-200">
            Kembali ke Form
          </a>
        </div>
      </div>

      <!-- Success State -->
      <div id="dataState" class="hidden space-y-6">
        
        <!-- Status Badge -->
        <div class="text-center mb-6">
          <div id="statusBadge" class="inline-flex items-center px-6 py-3 rounded-full text-sm font-semibold">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <span id="statusText">Loading...</span>
          </div>
        </div>

        <!-- Rental ID -->
        <div class="bg-[#1c2128] border border-[#30363d] rounded-lg p-4">
          <div class="flex items-center justify-between">
            <span class="text-[#8b949e] text-sm">ID Peminjaman:</span>
            <span id="rentalId" class="text-[#58a6ff] font-mono font-bold text-lg">#0000</span>
          </div>
        </div>

        <!-- Personal Information -->
        <div class="bg-[#1c2128] border border-[#30363d] rounded-lg p-6">
          <h3 class="text-[#c9d1d9] font-bold text-lg mb-4 flex items-center">
            <svg class="w-5 h-5 mr-2 text-[#1f6feb]" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            Informasi Peminjam
          </h3>
          <div class="space-y-3">
            <div class="flex justify-between border-b border-[#30363d] pb-2">
              <span class="text-[#8b949e]">Nama Lengkap:</span>
              <span id="nama" class="text-[#c9d1d9] font-semibold">-</span>
            </div>
            <div class="flex justify-between border-b border-[#30363d] pb-2">
              <span class="text-[#8b949e]">No. Telepon:</span>
              <span id="noHp" class="text-[#c9d1d9] font-semibold">-</span>
            </div>
            <div class="flex justify-between border-b border-[#30363d] pb-2">
              <span class="text-[#8b949e]">Alamat:</span>
              <span id="alamat" class="text-[#c9d1d9] font-semibold">-</span>
            </div>
            <div class="flex justify-between">
              <span class="text-[#8b949e]">Tanggal Sewa:</span>
              <span id="tanggalSewa" class="text-[#c9d1d9] font-semibold">-</span>
            </div>
          </div>
        </div>

        <!-- Items Selected -->
        <div class="bg-[#1c2128] border border-[#30363d] rounded-lg p-6">
          <h3 class="text-[#c9d1d9] font-bold text-lg mb-4 flex items-center">
            <svg class="w-5 h-5 mr-2 text-[#1f6feb]" fill="currentColor" viewBox="0 0 24 24">
              <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/>
            </svg>
            Alat yang Dipinjam
          </h3>
          <div id="itemsList" class="space-y-2">
            <!-- Items will be populated here -->
          </div>
        </div>

        <!-- Total Price -->
        <div class="bg-gradient-to-r from-[#1c2128] to-[#161b22] border-2 border-[#3fb950] rounded-lg p-6">
          <div class="flex justify-between items-center">
            <span class="text-[#c9d1d9] font-bold text-lg">Total Harga:</span>
            <span id="totalPrice" class="text-[#3fb950] text-2xl font-bold">Rp 0</span>
          </div>
        </div>

        <!-- Bukti Transfer -->
        <div class="bg-[#1c2128] border border-[#30363d] rounded-lg p-6">
          <h3 class="text-[#c9d1d9] font-bold text-lg mb-4 flex items-center">
            <svg class="w-5 h-5 mr-2 text-[#1f6feb]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
            Bukti Transfer
          </h3>
          <a id="buktiLink" href="#" target="_blank" class="block">
            <img id="buktiImage" src="" alt="Bukti Transfer" class="w-full rounded-lg border border-[#30363d] hover:border-[#1f6feb] transition-all duration-200 cursor-pointer" />
          </a>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-4 pt-4">
          <a href="index.html" class="flex-1 text-center bg-[#21262d] border border-[#30363d] text-[#c9d1d9] font-semibold py-3 px-4 rounded-lg hover:bg-[#30363d] transition-all duration-200">
            Kembali ke Form
          </a>
          <button onclick="window.print()" class="flex-1 bg-gradient-to-r from-[#1f6feb] to-[#58a6ff] text-white font-semibold py-3 px-4 rounded-lg hover:from-[#388bfd] hover:to-[#79c0ff] transition-all duration-200">
            Cetak Bukti
          </button>
        </div>

        <!-- Info Message -->
        <div class="bg-blue-900/20 border border-blue-700/50 rounded-lg p-4">
          <p class="text-[#58a6ff] text-sm text-center">
            Simpan ID peminjaman Anda untuk tracking status verifikasi
          </p>
        </div>

      </div>

    </div>
  </div>

  <!-- Supabase JS Client - HARUS DIMUAT PERTAMA -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Config File - Inisialisasi Supabase -->
  <script src="config.js"></script>
  <!-- Verify Script - Logic aplikasi -->
  <script src="verify.js"></script>
</body>
</html>